@page
@using TPOT_Links.Pages.Sandbox
@model IndexModel
@{
  // C# vars go here!
  var current_query = Model.Query;
}

<form x-data='setup()'>

    <h1 class='glowing text-xl' x-text='title'></h1>

    @if (!string.IsNullOrEmpty(@current_query))
    {
        <div class='text-ghost'>
            <label class='text-2xl'>Current Query: </label>
            <div class="mockup-code">
                @current_query
            </div>
        </div>
    }
   
    <div class="card p-5 mb-4 text-ocean-500">
        <div class="d-flex justify-content-between">

            <button
                x-show='false'
                class='btn-active btn'
                hx-get='@Url.Page("","Recommendations")'
                hx-target="#recommendations"
                >Get Teaching Recommendations</button>

            <div id="recommendations">
                <!-- Recommended papers get injected here -->
            </div>

            <div class="form-control w-full max-w-xs">
                <label class="label">
                    <span class="label-text">What is the name of the paper?</span>
                    <span class="label-text-alt">Top Right label</span>
                </label>

                <input 
                    type="text"
                    name="term"
                    id="query"
                    autocomplete="off"
                    hx-get='@Url.Page("Index", "SearchByRegex")'
                    hx-target="#search_results"
                    hx-trigger="keyup changed delay:250ms"
                    hx-indicator="#loading"
                    placeholder="Search"
                    class="input input-bordered w-full max-w-xs input-ghost"
                    aria-label="Username"
                    aria-describedby="search-addon" />
            </div>  

            <div id="search_results">
            </div>

            <div class="htmx-indicator" id='loading'>loading...</div>

        </div>
    </div>
</form>

<script>
    function setup()
    {
        return {
            title: "Teachings"
        }
    }
</script>