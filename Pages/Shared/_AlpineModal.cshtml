@using CodeMechanic.Types
@using CodeMechanic.Diagnostics
@model AlpineModalOptions
@{
    var options = Model.ToMaybe().IfNone(new AlpineModalOptions());
    options.Dump("alpine modal options");
}

@* *@

<div
    x-data="{ 'showModal': @options.show_modal.AsJS() }"
    @@keydown.escape="showModal = false">
    <!-- Trigger for Modal -->
    <!-- <button type="button" x-on:click="showModal = true">Open Modal</button> -->

    @* <template x-if="@options.show_modal_on_init.AsJS()" x-cloak> *@
    <span x-init="showModal = true"></span>

    <!-- Modal -->
    <div
        class="card fixed inset-0 z-30 flex items-center justify-center overflow-auto bg-black bg-opacity-50"
        x-show="showModal">
        <!-- Modal inner -->
        <div
            class="max-w-3xl px-6 py-4 mx-auto text-left bg-primary rounded shadow-lg"
            x-on:click.away="showModal = false"
            x-transition:enter="motion-safe:ease-out duration-300"
            x-transition:enter-start="opacity-0 scale-90"
            x-transition:enter-end="opacity-100 scale-100">
            <!-- Title / Close-->
            <div class="flex items-center justify-between">
                <h5 class="text-5xl mr-3 text-accent max-w-none">
                    Thanks for visiting TPOT Links!
                </h5>

                <button
                    type="button"
                    class="z-50 cursor-pointer"
                    x-on:click="showModal = false">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor">
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>

            <!-- content -->
            <div class="text-accent text-4xl">
                <p>Do try the Search feature!</p>
            </div>
        </div>
    </div>
    @* </template> *@
</div>